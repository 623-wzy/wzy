| 算术运算中的转换规则 | 数据类型的转换等级 |
|-------|-------|
| ![Image 1](https://github.com/623-wzy/wzy/blob/main/image/0958f5f4-8951-4b8f-b28f-b51a36553ea8.png) | ![Image 2](https://github.com/623-wzy/wzy/blob/main/image/33b5c7ba-180c-4606-8bf6-0c66f05dd8ee.png) |

## 有符号数和无符号数的相互转换
- **C语言允许不同数据类型之间进行强制类型转换,同时描述一个原理:**
  - 计算机中数据的存储一般都是补码,
  - 计算机在强制类型转换的结果是保持位值不变(内存中存储的补码不改变),仅仅改变了数据的解释方式
- **有符号数转换成无符号数：**
  - 判断有符号数最高位是否为1,如果有符号数最高位为1,则把有符号数解释为补码(求真值:符号位不变,数值位取反,末位+1)
  - 如果有符号数最高位为0,则直接把有符号数解释为无符号数
- **无符号数转换成有符号数：**
  - 判断无符号数最高位是否为1,如果无符号数最高位为1,则把无符号数解释为补码(求真值:符号位不变,数值位取反,末位+1) **【会将无符号数按照负数存储方式解释】**
  - 如果无符号数最高位为0,则直接把无符号数解释为无符号数 **【直接将无符号数按照正数存储方式解释】**

## 有符号类型和无符号类型的运算
&emsp;&emsp; **不可将无符号数和有符号数放在同一运算内（一般针对int的上层类型 unsigned int 和unsigned long int，因为unsigned short int在运算时会转换成int来进行操作【整型提升】）**
- 算术运算
  - 编译器会将无符号数与有符号数之间的操作自动转化为无符号数来进行处理。即有符号和无符号算术运算操作时会将有符号类型转换为无符号类型来计算。
- 比较运算
  - 有符号数和无符号数进行比较运算时（==，<,>,<=,>=）,有符号数隐式转换成了无符号数（即底层的补码不变，但是此数从有符号数变成了无符号数），此时的a的值远大于b。

## 整型提升
&emsp;&emsp; **整型提升是C程序设计语言中的一项规定：在表达式计算时，各种整形首先要提升为int类型，如果int类型不足以表示则要提升为unsigned int类型；然后执行表达式的运算。**
- 一个表达式中用到了整型值，那么类型为char、short int活整型位域(这几者带符号或无符号均可)的变量，以及枚举类型的对象，都可以被放在这个整型变量的位置。
- 如果上述中的变量的原始类型值域可以被int表示，那么原值被转换为int；否则的话，转为unsigned int。
- 即字符型、short、int及枚举类型在参与运算的时候，都会转换成int类型进行运算，如果int类型不足以表示则转换成unsigned int类型。

## 隐式转换
- 算术运算式中，若参与运算的成员类型不同，低类型转换为高类型，然后进行运算。
  - 例：int+ char  +double运算的结果应该为double类型
- 赋值表达式中，右边表达式的值自动隐式转换为左边变量的类型，并赋值给他。
  - 例：int=float+char,表达式的右边char 类型和float类型进行运算进行隐式转换为float类型，在将float类型转换为int类型赋值给表达式左边的int类型变量。
  - 如果右边量的数据类型长度比左边长时，将丢失一部分数据，这样会降低精度，丢失的部分按四舍五入向前舍入。
```C
unsigned int a = 65535;   
unsigned short int b = a;
printf("the value of b = %u", b)
输出为65535. 
unsigned int a = 65536;   
unsigned short int b = a;
printf("the value of b = %u", b)
输出为0. 即只截取后16比特，前16比特直接舍去
unsigned int a = 0x12345678;
unsigned short int c = a;
printf("tmp_uint = %x\n", a);
printf("tmp_uint = %x\n", c);
输出为
0x12345678
0x5678
```
- 函数调用中参数传递时，系统隐式地将实参转换为形参的类型后，赋给形参。
- 有返回值时，系统将隐式地将返回表达式类型转换为返回值类型，赋值给调用函数。
- 算数运算时，字符必须先转换为整数(C语言规定字符类型数据和整型数据之间可以通用) 。
- short型转换为int型(同属于整型) 。
- float型数据在运算时一律转换为双精度(double)型，以提高运算精度(同属于实型) 。

## 强制类型转换
&emsp;&emsp; **注意强制类型转换时的值域问题**
-  强制类型转换是把变量从一种类型转换为另一种数据类型。例如，想存储一个 long 类型的值到一个简单的整型中，您需要把 long 类型强制转换为 int 类型。您可以使用强制类型转换运算符来把值显式地从一种类型转换为另一种类型。
